<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition   xmlns:ui="http://java.sun.com/jsf/facelets"
                  xmlns="http://www.w3.org/1999/xhtml"
                  template="/template/main-template.xhtml"
                  xmlns:p="http://primefaces.prime.com.tr/ui"
                  xmlns:h="http://java.sun.com/jsf/html"
                  xmlns:f="http://java.sun.com/jsf/core"
                  xmlns:finantial="http://java.sun.com/jsf/composite/components/finantial"
                  xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="head">

            <ui:param name="menu" value="1"/>
        </ui:define>
    <ui:define name="theme"/>

    <ui:define name="content">
    <ui:param name="menu" value="1"/>
        
    <p:panel header="Finanças de #{tabService.user.fullname}" style="padding-top: -30px;overflow: auto" >
       
        <table width="100%" style="margin-top: -15px">
                <tr>
                    <td align="center" valign="middle">
                        <h:form id="form_carroussel" prependId="false">
                        <h:panelGrid columns="3" cellspacing="10" id="grid_carroussel" style="margin-top: 25px">
                            <h:graphicImage library="images" name="backward.png" style="cursor: pointer">
                                    <p:effect type="pulsate" speed="1900" for="currentYearBt" event="click" />
                                    <p:ajax event="click" global="false" update=":months_form:months_panel, currentYearBt" process="@this" listener="#{tabService.previousYear}" />
                            </h:graphicImage>
                            <p:menuButton value="#{tabBean.currentYear.title}" id="currentYearBt" style="font-size: 13px!important;" >
                                <p:menuitem value="2010" action="#{tabService.changeYear(0)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2011" action="#{tabService.changeYear(1)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2012" action="#{tabService.changeYear(2)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2013" action="#{tabService.changeYear(3)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2014" action="#{tabService.changeYear(4)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2015" action="#{tabService.changeYear(5)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2016" action="#{tabService.changeYear(6)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2017" action="#{tabService.changeYear(7)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2018" action="#{tabService.changeYear(8)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2019" action="#{tabService.changeYear(9)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2020" action="#{tabService.changeYear(10)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2021" action="#{tabService.changeYear(11)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2022" action="#{tabService.changeYear(12)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2023" action="#{tabService.changeYear(13)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2024" action="#{tabService.changeYear(14)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2025" action="#{tabService.changeYear(15)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2026" action="#{tabService.changeYear(16)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2027" action="#{tabService.changeYear(17)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2028" action="#{tabService.changeYear(18)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2029" action="#{tabService.changeYear(19)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                                <p:menuitem value="2030" action="#{tabService.changeYear(20)}" process="grid_carroussel" update=":months_form:months_panel, grid_carroussel"/>
                            </p:menuButton>
                            <h:graphicImage library="images" name="forward.png" style="cursor: pointer">
                                <p:effect type="pulsate" speed="1900" for="currentYearBt" event="click" />
                                <p:ajax event="click" global="false" update=":months_form:months_panel, currentYearBt" process="@this" listener="#{tabService.nextYear}" />
                            </h:graphicImage>
                        </h:panelGrid>
                        </h:form>
                    </td>
                </tr>
                <tr>
                    <td align="right">
                          <h:form id="months_form">
                        <p:outputPanel id="months_panel">
                            <p:tabView dynamic="false" activeIndex="#{tabService.currentMonthIndex}" >
                                <p:tab title="#{msg[tabBean.currentYear.jan.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.jan}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.fev.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.fev}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.mar.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.mar}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.abr.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.abr}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.mai.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.mai}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.jun.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.jun}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.jul.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.jul}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.ago.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.ago}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.set.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.set}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.out.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.out}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.nov.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.nov}"/>
                                </p:tab>
                                <p:tab title="#{msg[tabBean.currentYear.dez.title]}" >
                                    <finantial:month month="#{tabBean.currentYear.dez}"/>
                                </p:tab>
                            </p:tabView>
                            </p:outputPanel>
                            
                            <p:outputPanel id="include_finance" >
                                <div align="left">
                                <ui:include src="add-financa.xhtml"/>
                                </div>
                         </p:outputPanel>

                    </h:form>
                    </td>
                </tr>
            </table>
            </p:panel>

    <p:tooltip global="true" id="tooltip" showEffect="slide" hideEffect="slide"/>


                 <p:dialog  modal="true" widgetVar="editModal" header="Editar" showEffect="fold"  hideEffect="explode" minHeight="150" closable="true" draggable="true" >
                     <h:form id="edit_form" prependId="false">
                              <ui:include src="edit-financa.xhtml"/>
                     </h:form>
                 </p:dialog>
            <p:dialog  modal="true" widgetVar="removeModal" header="Remover Finança" showEffect="fold"  hideEffect="fold" minHeight="150" width="370" closable="true" resizable="false" draggable="true" >
                     <h:form id="remove_form" prependId="false">
                              <ui:include src="remove-financa.xhtml"/>
                     </h:form>
                 </p:dialog>


                     <p:dialog id="month_dlg" modal="true" widgetVar="monthModal" header="Incluir Despesa" showEffect="fold"  hideEffect="explode" minHeight="150" closable="true" draggable="true">
                         <h:form id="month_form" prependId="false">
                         <p:outputPanel id="month_panel">
                             <p:outputPanel rendered="#{financeBean.tipoCorrete eq financeBean.OUTCOME}">
                                <ui:include src="fragments/add-month-outcome.xhtml" />
                              </p:outputPanel>
                             <p:outputPanel rendered="#{financeBean.tipoCorrete eq financeBean.INCOME}">
                                <ui:include src="fragments/add-month-income.xhtml" />
                              </p:outputPanel>
                         </p:outputPanel>
                     </h:form>
                 </p:dialog>



    </ui:define>
</ui:composition>
